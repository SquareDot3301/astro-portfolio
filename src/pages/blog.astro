---
import Navbar from "../components/Navbar.astro";
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";

const allPosts = Object.values(
  import.meta.glob("./posts/*.md", { eager: true })
) as any[];

// Tri dÃ©croissant sur la date
const sortedPosts = allPosts.sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).getTime() -
    new Date(a.frontmatter.pubDate).getTime()
);
---

<Layout
  title="Mon Blog"
  description={import.meta.env.DESCRIPTION}
  url="/blog"
  index="index, follow"
>
  <div class="min-h-screen flex flex-col">
    <div class="h-20"><Navbar /></div>
    <main class="flex-1 flex flex-col items-center justify-center">
      {
        sortedPosts.map((post) => (
          <div class="my-4">
            <a
              class="relative font-bold group px-2 text-text text-xl lg:text-3xl"
              href={post.url}
            >
              - {post.frontmatter.title}
              <span class="absolute left-0 -bottom-1 h-1 w-0 bg-pink transition-all duration-300 group-hover:w-full" />
            </a>
          </div>
        ))
      }
    </main>
    <div class="h-20"><Footer /></div>
  </div>
</Layout>
